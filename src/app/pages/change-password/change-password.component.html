<ng-container *ngIf="user">
    <div class="card card-custom" [formGroup]="formGroup">
      <!-- begin::Loading -->
      <ng-container *ngIf="isLoading$ | async">
        <div class="progress progress-modal">
          <div
            class="progress-bar progress-bar-striped progress-bar-animated bg-primary"
            role="progressbar"
            style="width: 100%"
            aria-valuenow="100"
            aria-valuemin="0"
            aria-valuemax="100"
          ></div>
        </div>
      </ng-container>
      <!-- end::Loading -->
      <!--begin::Header-->
      <div class="card-header py-3">
        <div class="card-title align-items-start flex-column">
          <h3 class="card-label font-weight-bolder text-dark">{{ 'AUTH.GENERAL.CHANGE_PASSWORD' | translate }}</h3>
          <!-- <span class="text-muted font-weight-bold font-size-sm mt-1">Change your account password</span> -->
        </div>
        <div class="card-toolbar">
          <button type="submit" class="btn btn-primary font-weight-bold mr-2"
          [disabled]="formGroup.invalid" (click)="save(false)">{{ 'COMMON.SAVE' | translate }}</button>
          <!-- <button type="reset" class="btn btn-secondary" (click)="cancel()">Cancel</button> -->
        </div>
      </div>
      <!--end::Header-->
      <!--begin::Form-->
      <div class="form">
        <div class="card-body">
          <!--begin::Alert-->
          <!-- <div class="alert alert-custom alert-light-danger fade show mb-10" role="alert">
            <div class="alert-icon">
              <span class="svg-icon svg-icon-3x svg-icon-danger"
                [inlineSVG]="'./assets/media/svg/icons/Code/Info-circle.svg'"
                cacheSVG="true"
              >
              </span>
            </div>
            <div class="alert-text font-weight-bold">Configure user passwords to expire periodically. Users will need
              warning that their passwords are going to expire,
              <br>or they might inadvertently get locked out of the system!
            </div>
            <div class="alert-close">
              <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">
                  <i class="ki ki-close"></i>
                </span>
              </button>
            </div>
          </div> -->
          <!--end::Alert-->
          <div class="col-lg-12">
            <label>{{ 'COMMON.ENTER' | translate }} {{ 'CHANGEPASSWORD.PASSWORD_ACTUAL' | translate }}</label>
            <input type="password" class="form-control form-control-lg form-control-solid" autocomplete="off"
              placeholder="{{ 'CHANGEPASSWORD.PASSWORD_ACTUAL' | translate }}" name="current_password" [class.is-invalid]="isControlInvalid('current_password')"
              [class.is-valid]="isControlValid('current_password')" formControlName="current_password" />
            <div class="feedback" *ngIf="!isControlTouched('current_password')">{{ 'COMMON.PLEASE_ENTER' | translate }} <b>{{ 'CHANGEPASSWORD.PASSWORD_ACTUAL' | translate }}</b></div>
            <div class="valid-feedback" *ngIf="isControlValid('current_password')">{{ 'CHANGEPASSWORD.PASSWORD_ACTUAL' | translate }}  {{ 'COMMON.WAS_ENTERED_CORRECT' | translate }}</div>
            <div class="invalid-feedback" *ngIf="controlHasError('required', 'current_password')">{{ 'CHANGEPASSWORD.PASSWORD_ACTUAL' | translate }}  {{ 'COMMON.IS_REQUIRED' | translate }}</div>
          </div>
          <br>
          <div class="col-lg-12">
            <label>{{ 'COMMON.ENTER' | translate }} {{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }}</label>
            <input type="password" class="form-control form-control-lg form-control-solid" autocomplete="off"
              placeholder="{{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }}" name="new_password" [class.is-invalid]="isControlInvalid('new_password')"
              [class.is-valid]="isControlValid('new_password')" formControlName="new_password" />
            <div class="feedback" *ngIf="!isControlTouched('new_password')">{{ 'COMMON.PLEASE_ENTER' | translate }} <b>{{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }}</b></div>
            <div class="valid-feedback" *ngIf="isControlValid('new_password')">{{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }}  {{ 'COMMON.WAS_ENTERED_CORRECT' | translate }}</div>
            <div class="invalid-feedback" *ngIf="controlHasError('required', 'new_password')">{{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }}  {{ 'COMMON.IS_REQUIRED' | translate }}</div>
            <div class="invalid-feedback" *ngIf="controlHasError('minlength', 'new_password')">{{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }} {{ 'COMMON.SHOULD_HAVE_LEAST' | translate }} {{password_setting.min_password_length}}</div>
            <div class="invalid-feedback" *ngIf="controlHasError('maxlength', 'new_password')">{{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }} {{ 'COMMON.SHOULD_HAVE_MAXIMUM' | translate }} {{password_setting.max_password_length}}</div>
            <div class="invalid-feedback" *ngIf="controlHasError('pattern', 'new_password') && newPasswordErrors?.requiredLowercase">{{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }} {{ 'COMMON.SHOULD_HAVE_LOWER_LEAST' | translate }} {{password_setting.min_lowercase_chars}}</div>
            <div class="invalid-feedback" *ngIf="controlHasError('pattern', 'new_password') && newPasswordErrors?.requiredUppercase">{{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }} {{ 'COMMON.SHOULD_HAVE_UPPER_LEAST' | translate }} {{password_setting.min_uppercase_chars}}</div>
            <div class="invalid-feedback" *ngIf="controlHasError('pattern', 'new_password') && newPasswordErrors?.requiredNumeric">{{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }} {{ 'COMMON.SHOULD_HAVE_NUMERIC_LEAST' | translate }} {{password_setting.min_numeric_chars}}</div>
            <div class="invalid-feedback" *ngIf="controlHasError('pattern', 'new_password') && newPasswordErrors?.requiredSpecial">{{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }} {{ 'COMMON.SHOULD_HAVE_SPECIAL_LEAST' | translate }} {{password_setting.min_special_chars}}</div>
          </div>
          <br>
          <div class="col-lg-12">
            <label>{{ 'COMMON.ENTER' | translate }} {{ 'CHANGEPASSWORD.PASSWORD_VERIFY' | translate }}</label>
            <input type="password" class="form-control form-control-lg form-control-solid" autocomplete="off"
              placeholder="{{ 'CHANGEPASSWORD.PASSWORD_VERIFY' | translate }}" name="verify_password" [class.is-invalid]="isControlInvalid('verify_password')"
              [class.is-valid]="isControlValid('verify_password')" formControlName="verify_password" />
            <div class="feedback" *ngIf="!isControlTouched('verify_password')">{{ 'COMMON.PLEASE_ENTER' | translate }} <b>{{ 'CHANGEPASSWORD.PASSWORD_VERIFY' | translate }}</b></div>
            <div class="valid-feedback" *ngIf="isControlValid('verify_password')">{{ 'CHANGEPASSWORD.PASSWORD_VERIFY' | translate }}  {{ 'COMMON.WAS_ENTERED_CORRECT' | translate }}</div>
            <div class="invalid-feedback" *ngIf="controlHasError('required', 'verify_password')">{{ 'CHANGEPASSWORD.PASSWORD_VERIFY' | translate }}  {{ 'COMMON.IS_REQUIRED' | translate }}</div>
            <div class="invalid-feedback" *ngIf="controlHasError('passwordMismatch', 'verify_password')">{{ 'CHANGEPASSWORD.PASSWORD_VERIFY' | translate }} {{ 'CHANGEPASSWORD.PASSWORD_MISMATCH' | translate }} {{ 'CHANGEPASSWORD.PASSWORD_NEW' | translate }}</div>
          </div>
        </div>
      </div>
      <!--end::Form-->
    </div>
  </ng-container>